---
import menus from "../collections/menu.json";
import Logo from "../components/logo.astro";
---

<!-- This is an invisible div with relative position so that it takes up the height of the menu (because menu is absolute/fixed) -->
<div class="relative w-full py-1 opacity-0 pointer-events-none"></div>
<header id="header" class="absolute top-0 z-50 w-full py-1 font-nav font-bold text-pnw-sea-700 overflow-hidden">
  <div id="vanta-header" class="absolute inset-0 -z-10"></div>
  <div
    class="container flex items-center mx-auto px-7 max-w-7xl select-none"
  >
    <Logo />
    <nav
      class="flex flex-row items-center gap-1 ml-4 text-base text-pnw-sea-600 dark:text-pnw-sea-300"
    >
      {
        menus.map((menu) => {
          const isActive = Astro.url.pathname === menu.url || 
            (menu.url !== "/" && Astro.url.pathname.startsWith(menu.url));
          return (
            <a
              href={menu.url}
              class:list={[
                "relative flex items-center justify-center px-3 py-1 font-medium tracking-wide text-center duration-200 ease-out rounded-lg transition-all whitespace-nowrap",
                isActive 
                  ? "text-pnw-sea-800 dark:text-white bg-pnw-sea-200/50 dark:bg-pnw-sea-700/50" 
                  : "text-pnw-sea-600 dark:text-pnw-sea-300 hover:text-pnw-sea-800 dark:hover:text-white hover:bg-pnw-sea-100 dark:hover:bg-pnw-sea-800/50"
              ]}
            >
              {menu.name}
            </a>
          )
        })
      }
    </nav>
    <div class="ml-auto">
      <div
        id="darkToggle"
        class="relative flex items-center cursor-pointer"
      >
        <div class="relative w-5 h-8 bg-pnw-sea-200 dark:bg-pnw-sea-800 rounded-sm border-2 border-pnw-sea-400 dark:border-pnw-sea-600 shadow-inner">
          <div
            id="switchKnob"
            class="absolute left-0.5 right-0.5 h-3 bg-pnw-sea-500 dark:bg-pnw-sea-400 rounded-sm shadow-md transition-all duration-300 ease-out top-[calc(100%-14px)] dark:top-0.5"
          ></div>
        </div>
      </div>
    </div>
  </div>
</header>
